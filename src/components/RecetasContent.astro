---
import { t } from "i18next";
import Calendar from "@components/icons/calendar.astro";
const Images = [
  "https://wislinfarm.com/wp-content/uploads/2020/08/Cuadritos_de_queso_Oaxaca_rebozados_800X559_137548892.jpg",
  "https://wislinfarm.com/wp-content/uploads/2020/08/q3-800x559.jpg",
  "https://wislinfarm.com/wp-content/uploads/2020/08/verdurasQueso.png",
  "https://wislinfarm.com/wp-content/uploads/2020/08/qph2.jpg",
];
const RecetaContenido = [
  {
    id: 1,
    receta: (t("recetas.panelatext")),
    titulo: (t("recetas.panelatitle")),
    image: Images[3],
    path: (t("recetas.panelaurl")),
    date: (t("recetas.paneladate")),
    content: [
     t("recetas.panelacontent1.parrafo1"),
     t("recetas.panelacontent1.parrafo2"),
     t("recetas.panelacontent1.parrafo3"),
     t("recetas.panelacontent1.parrafo4"),
     t("recetas.panelacontent1.parrafo5"),
     t("recetas.panelacontent1.parrafo6"),
  ],
    ingredientes: [
     t("recetas.panelacontent2.parrafo1"),
     t("recetas.panelacontent2.parrafo2"),
     t("recetas.panelacontent2.parrafo3"),
     t("recetas.panelacontent2.parrafo4"),
    ],
    instrucciones: [
     t("recetas.panelacontent3.parrafo1"),
     t("recetas.panelacontent3.parrafo2"),
     t("recetas.panelacontent3.parrafo3"),
     t("recetas.panelacontent3.parrafo4"),
    ]
  },
  {
    id: 2,
    receta: (t("recetas.oaxacatext")),
    titulo: (t("recetas.oaxacatitle")),
    image: Images[0],
    path: (t("recetas.oaxacaurl")),
    date: (t("recetas.oaxacadate")),
    ingredientes: [
     t("recetas.oaxacacontent2.parrafo1"),
     t("recetas.oaxacacontent2.parrafo2"),
     t("recetas.oaxacacontent2.parrafo3"),
     t("recetas.oaxacacontent2.parrafo4"),
      t("recetas.oaxacacontent2.parrafo5"),
      t("recetas.oaxacacontent2.parrafo6"),
    ],
    instrucciones: [
     t("recetas.oaxacacontent3.parrafo1"),
     t("recetas.oaxacacontent3.parrafo2"),
     t("recetas.oaxacacontent3.parrafo3"),
     t("recetas.oaxacacontent3.parrafo4"),
     t("recetas.oaxacacontent3.parrafo5"),
    ]
  },
  {
    id: 3,
    receta: (t("recetas.verdurastext")),
    titulo: (t("recetas.verdurastitle")),
    image: Images[2],
    path: (t("recetas.verdurasurl")),
    date: (t("recetas.verdurasdate")),
    ingredientes: [
     t("recetas.verdurascontent2.parrafo1"),
     t("recetas.verdurascontent2.parrafo2"),
     t("recetas.verdurascontent2.parrafo3"),
     t("recetas.verdurascontent2.parrafo4"),
      t("recetas.verdurascontent2.parrafo5"),
      t("recetas.verdurascontent2.parrafo6"),
      t("recetas.verdurascontent2.parrafo7"),
      t("recetas.verdurascontent2.parrafo8"),
      t("recetas.verdurascontent2.parrafo9"),
      t("recetas.verdurascontent2.parrafo10"),
      t("recetas.verdurascontent2.parrafo11"),

    ],
    instrucciones: [
     t("recetas.verdurascontent3.parrafo1"),
     t("recetas.verdurascontent3.parrafo2"),
     t("recetas.verdurascontent3.parrafo3"),
     t("recetas.verdurascontent3.parrafo4"),
     t("recetas.verdurascontent3.parrafo5"),
    ]
  },
  {
    id: 4,
    receta: (t("recetas.ensaladatext")),
    titulo: (t("recetas.ensaladatitle")),
    image: Images[1],
    path: (t("recetas.ensaladaurl")),
    date: (t("recetas.ensaladadate")),
    content: [
      t("recetas.ensaladacontent1.parrafo1"),
  ],
    ingredientes: [
    t("recetas.ensaladacontent2.parrafo1"),
    t("recetas.ensaladacontent2.parrafo2"),
    t("recetas.ensaladacontent2.parrafo3"),
    t("recetas.ensaladacontent2.parrafo4"),
    t("recetas.ensaladacontent2.parrafo5"),
    ],
    instrucciones: [
    t("recetas.ensaladacontent3.parrafo1"),
    t("recetas.ensaladacontent3.parrafo2"),
    t("recetas.ensaladacontent3.parrafo3"),
    t("recetas.ensaladacontent3.parrafo4"),

    ]
  },
];

const receta = Astro.url.pathname;
const matchedReceta = RecetaContenido.find((item) => item.path === receta);
---

<main>
  <section class="w-[70%] mx-auto my-24">
    <h1
      class="text-center text-red-600 font-Roboto font-bold text-5xl uppercase my-12 mb-16"
    >
      {t("recetas.title")}
    </h1>
    {
      matchedReceta && (
        <>
          <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
            <div>
              {" "}
              <img
                src={matchedReceta.image}
                class="rounded-2xl w-[450px] object-cover"
                alt={matchedReceta.titulo}
              />
            </div>
            <div>
              {" "}
              <h1 class="uppercase font-Roboto font-medium text-sm text-red-600">
                {matchedReceta.receta}
              </h1>
              <p class="text-black font-Roboto font-semibold text-2xl mb-4">
                {matchedReceta.titulo}
              </p>
              <hr class="mb-2" />
              <div class="flex gap-4 items-center mb-4">
                <Calendar class="size-10 stroke-red-600" />
                <span class="text-gray-500 text-base">
                  {matchedReceta.date}
                </span>
              </div>
              <hr class="mb-2" />
              <div id="accordion-collapse" data-accordion="collapse">
                {matchedReceta.content && (

                <h2 id="accordion-collapse-heading-1">
                  <button
                    type="button"
                    class="flex items-center justify-between w-full py-5 font-medium rtl:text-right text-black gap-3"
                    data-accordion-target="#accordion-collapse-body-1"
                    aria-expanded="true"
                    aria-controls="accordion-collapse-body-1"
                  >
                    <span class="text-2xl font-Roboto font-medium">{t("recetas.descripcion")}</span>
                    <svg
                      data-accordion-icon
                      class="w-3 h-3 rotate-180 shrink-0"
                      aria-hidden="true"
                      xmlns="http://www.w3.org/2000/svg"
                      fill="none"
                      viewBox="0 0 10 6"
                    >
                      <path
                        stroke="currentColor"
                        stroke-linecap="round"
                        stroke-linejoin="round"
                        stroke-width="2"
                        d="M9 5 5 1 1 5"
                      />
                    </svg>
                  </button>
                </h2>
                )}
                <div
                  id="accordion-collapse-body-1"
                  class="hidden"
                  aria-labelledby="accordion-collapse-heading-1"
                >
                <p class="mb-4 font-Roboto text-justify">
                {matchedReceta.content?.map((paragraph, index) => (
                  <>
                    {paragraph}
                    {index < matchedReceta.content.length - 1 ? <br /> <br /> : ""}
                  </>
                ))}
              </p>
                </div>
                <hr/>
                <h2 id="accordion-collapse-heading-2">
                  <button
                    type="button"
                    class="flex items-center justify-between w-full py-5 font-medium rtl:text-right text-black gap-3"
                    data-accordion-target="#accordion-collapse-body-2"
                    aria-expanded="false"
                    aria-controls="accordion-collapse-body-2"
                  >
                  <span class="text-2xl font-Roboto font-medium">{t("recetas.ingredientes")}</span>
                    <svg
                      data-accordion-icon
                      class="w-3 h-3 rotate-180 shrink-0"
                      aria-hidden="true"
                      xmlns="http://www.w3.org/2000/svg"
                      fill="none"
                      viewBox="0 0 10 6"
                    >
                      <path
                        stroke="currentColor"
                        stroke-linecap="round"
                        stroke-linejoin="round"
                        stroke-width="2"
                        d="M9 5 5 1 1 5"
                      />
                    </svg>
                  </button>
                </h2>
                <hr/>

                <div
                  id="accordion-collapse-body-2"
                  class="hidden"
                  aria-labelledby="accordion-collapse-heading-2"
                >
                <ul class="max-w-md space-y-1 text-black list-disc list-inside">
                                {matchedReceta.ingredientes?.map((paragraph, index) => (
                  <>
                   <li>{paragraph}</li> 
                  </>
                ))}
                </ul>
                </div>
                <h2 id="accordion-collapse-heading-2">
                  <button
                    type="button"
                    class="flex items-center justify-between w-full py-5 font-medium rtl:text-right text-black gap-3"
                    data-accordion-target="#accordion-collapse-body-3"
                    aria-expanded="false"
                    aria-controls="accordion-collapse-body-3"
                  >
                  <span class="text-2xl font-Roboto font-medium">{t("recetas.instrucciones")}</span>
                    <svg
                      data-accordion-icon
                      class="w-3 h-3 rotate-180 shrink-0"
                      aria-hidden="true"
                      xmlns="http://www.w3.org/2000/svg"
                      fill="none"
                      viewBox="0 0 10 6"
                    >
                      <path
                        stroke="currentColor"
                        stroke-linecap="round"
                        stroke-linejoin="round"
                        stroke-width="2"
                        d="M9 5 5 1 1 5"
                      />
                    </svg>
                  </button>
                </h2>
                <hr/>

                <div
                  id="accordion-collapse-body-3"
                  class="hidden"
                  aria-labelledby="accordion-collapse-heading-3"
                >
                <ul class="max-w-md space-y-1 text-black list-decimal list-inside">
                  {matchedReceta.instrucciones?.map((paragraph, index) => (
                  <>
                   <li>{paragraph}</li> 
                  </>
                ))}                </ul>
                </div>
              </div>
            </div>
          </div>
        </>
      )
    }
  </section>
</main>

<script type="module">
  window.addEventListener("load", (event) => {
    const acc = document.querySelectorAll("[data-accordion-target]");

    acc.forEach((button) => {
      button.addEventListener("click", function () {
        const panel = document.querySelector(
          this.getAttribute("data-accordion-target")
        );
        if (panel.classList.contains("hidden")) {
          panel.classList.remove("hidden");
        } else {
          panel.classList.add("hidden");
        }
      });
    });
  });
</script>
